<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><link href="/favicon.ico" rel="icon"><meta content="width=device-width,initial-scale=1" name="viewport"><meta content="#000000" name="theme-color"><meta content="Web site created using create-react-app" name="description"><link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet"><link href="/logo192.png" rel="apple-touch-icon"><link href="/manifest.json" rel="manifest"><script type="text/javascript">!function(i){if(i.search){var a={};i.search.slice(1).split("&").forEach((function(i){var l=i.split("=");a[l[0]]=l.slice(1).join("=").replace(/~and~/g,"&")})),void 0!==a.p&&window.history.replaceState(null,null,i.pathname.slice(0,-1)+(a.p||"")+(a.q?"?"+a.q:"")+i.hash)}}(window.location)</script><title>Nathan Smith</title><link href="/static/css/2.ca3edc6c.chunk.css" rel="stylesheet"><link href="/static/css/main.19629694.chunk.css" rel="stylesheet"><link href="https://fonts.googleapis.com" rel="preconnect"><style data-emotion="css-global">html{color:#333;font-family:Lato,sans-serif}html h1,html h2,html h3,html h4,html h5{font-family:Lato,sans-serif}</style><style data-emotion="css">.css-m94chg{background-color:#377771;color:#fff;padding:16px}.css-m94chg ul{display:flex;list-style:none;margin:0;padding:0}.css-m94chg ul li{display:block;margin:0 12px;cursor:pointer}.css-m94chg ul li:first-child{margin-left:0}.css-m94chg ul li:last-child{margin-right:0}.css-m94chg ul li.spacer{cursor:initial;-webkit-box-flex:1;flex-grow:1}.css-m94chg ul li a{text-decoration:none}.css-m94chg ul li a,.css-m94chg ul li a:active,.css-m94chg ul li a:hover,.css-m94chg ul li a:visited{color:#fff}.css-m94chg ul li a:hover{text-decoration:underline}.css-1kgcksk{max-width:900px;margin:32px}</style><link href="https://fonts.gstatic.com" rel="preconnect"><link href="https://api.buttercms.com" rel="preconnect"><link href="http://www.youtube.com" rel="preconnect"><link href="https://cdn.buttercms.com" rel="preconnect"><link href="https://open.spotify.com" rel="preconnect"><link href="https://raw.githubusercontent.com" rel="preconnect"><link href="https://www.youtube.com" rel="preconnect"><link href="https://www.googletagmanager.com" rel="preconnect"><link href="https://open.scdn.co" rel="preconnect"><link href="https://www.google-analytics.com" rel="preconnect"><link href="https://i.scdn.co" rel="preconnect"><link href="https://static.doubleclick.net" rel="preconnect"><link href="https://googleads.g.doubleclick.net" rel="preconnect"><link href="https://yt3.ggpht.com" rel="preconnect"><link href="https://i.ytimg.com" rel="preconnect"><link href="https://stats.g.doubleclick.net" rel="preconnect"><link href="https://www.google.com" rel="preconnect"></head><body><noscript>You need to enable JavaScript to run this app.</noscript><div id="root"><div><header class="css-m94chg"><ul><li><a href="/">Nathan Smith</a></li><li class="spacer"></li><li><a href="/about">About</a></li><li><a href="/contact">Contact</a></li></ul></header><div class="css-1kgcksk"><div><h1>usePrismjs: A prismjs hook for CRA & React</h1><h4>May 20, 2020, 4:14 PM</h4><div class="line-numbers"><h2>What is it?</h2><p><a href="https://prismjs.com/index.html" rel="follow">Prismjs</a> is a powerful little javascript to add syntax highlighting to <code>&lt;pre></code> and <code>&lt;code></code> blocks, but it hasn't kept up with a JavaScript framework-using, module-bundling world. There aren't many docs around how to use it with the npm package, and most want you to use a babel plugin, and I'm not about to eject my CRA app just for syntax highlighting. Additionally, the html I'm highlighting comes from a CMS, so it has to work with any incoming HTML. After struggling through it, I came up with this hook, which is being used on this page. How meta!</p><h2>Using the hook</h2><h3>1. Install prismjs</h3><p>The easy part. Just install prismjs and its types (if you're using TypeScript):</p><pre class="language-undefined line-numbers"><code class="language-undefined">npm install --save prismjs
npm install --save-dev @types/prismjs<span class="line-numbers-rows" aria-hidden="true"><span></span><span></span></span></code></pre><h3>2. Create the usePrismjs hook</h3><pre class="language-tsx line-numbers"><code class="language-tsx"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Prismjs <span class="token keyword">from</span> <span class="token string">'prismjs'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token string">'prismjs/themes/prism.css'</span><span class="token punctuation">;</span> <span class="token comment">/* or your own custom theme */</span>
<span class="token keyword">import</span> <span class="token string">'prismjs/plugins/line-numbers/prism-line-numbers.css'</span> <span class="token comment">/* add plugin css */</span>

<span class="token comment">// Require all needed languages</span>
<span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'prismjs/components/prism-typescript'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'prismjs/components/prism-jsx'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'prismjs/components/prism-tsx'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Require all needed plugins</span>
<span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'prismjs/plugins/line-numbers/prism-line-numbers'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> usePrismjs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">T</span></span> <span class="token attr-name">extends</span> <span class="token attr-name">HTMLElement</span><span class="token punctuation">></span></span><span class="token plain-text">(
  target: React.RefObject</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">T</span></span><span class="token punctuation">></span></span><span class="token plain-text">,
  plugins: string[] = []
) </span><span class="token punctuation">{</span>
  React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">.</span>current<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>plugins<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">.</span>current<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token operator">...</span>plugins<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// Highlight all &lt;pre>&lt;code>...&lt;/code>&lt;/pre> blocks contained by this element</span>
      Prismjs<span class="token punctuation">.</span><span class="token function">highlightAllUnder</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>target<span class="token punctuation">,</span> plugins<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token plain-text">
</span><span class="line-numbers-rows" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Customize to your plugin/language needs.</p><h3>3. Use the hook</h3><pre class="language-tsx line-numbers"><code class="language-tsx"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BlogPost <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../../types/cms'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> usePrismjs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../../hooks/usePrismjs'</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">PostProps</span> <span class="token punctuation">{</span>
  post<span class="token operator">:</span> BlogPost<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> Post<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token constant">FC</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PostProps</span></span><span class="token punctuation">></span></span><span class="token plain-text"> = props => </span><span class="token punctuation">{</span>
  <span class="token comment">// body is string with blog post html, including code</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> body<span class="token punctuation">,</span> title<span class="token punctuation">,</span> published <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">.</span>post<span class="token punctuation">;</span>
  <span class="token keyword">const</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>published<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> bodyRef <span class="token operator">=</span> React<span class="token punctuation">.</span>useRef<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">HTMLDivElement</span></span><span class="token punctuation">></span></span><span class="token plain-text">(null);
  usePrismjs(bodyRef, ['line-numbers']);

  return (
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>published<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>bodyRef<span class="token punctuation">}</span></span> <span class="token attr-name">dangerouslySetInnerHTML</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> __html<span class="token operator">:</span> body <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
  );
};
</span><span class="line-numbers-rows" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2>Explanations</h2><p>There are a few obvious questions I see:</p><h3>Why add the class directly to the dom?</h3><p>Because prismjs works directly on the dom; the <code>highlightAllUnder</code> method expects a real DOM element, so we have to give it one.</p><h3>Why not conditionally require plugins and languages like the babel plugin?</h3><p>This might work, but it would also mean conditionally requiring plugin css.</p></div></div><div><h1>Publishing a Dev and Production CRA App to GH Pages</h1><h4>May 20, 2020, 12:57 PM</h4><div class="line-numbers"><p>GitHub Pages is a free static site hosting service from GitHub that allows you to freely publish a static site with a custom domain. What if you want to publish two different versions of your create-react-app React application (like a dev version and production version) with two different custom domains? Through a little hack, this is pretty easy to set up.</p><h3>1. Create two repos</h3><p>You'll need two repos:</p><ol><li>Your master repo, this will contain only your production site</li><li>Your dev repo, this will contain your development branch as well as your dev site</li></ol><h3>2. Enable GitHub Pages on both repos</h3><p>Select the master branch as the branch to use on both repos. GitHub should pick up the domain from the CNAME files.</p><h3>3. Add two CNAMEs</h3><p>In your source, add a CNAME file to the public folder with your dev domain. For example:</p><p>public/CNAME</p><pre class="language-undefined line-numbers"><code class="language-undefined">officerhalf.dev<span class="line-numbers-rows" aria-hidden="true"><span></span></span></code></pre><p>Now add another CNAME file for your production environment. I've named this ProdCNAME:</p><p>public/ProdCNAME</p><pre class="language-undefined line-numbers"><code class="language-undefined">www.nathan-smith.org<span class="line-numbers-rows" aria-hidden="true"><span></span></span></code></pre><h3>4. Setup gh-pages and publishing</h3><p>In your CRA, install gh-pages:</p><pre class="language-undefined line-numbers"><code class="language-undefined">npm install --save-dev gh-pages<span class="line-numbers-rows" aria-hidden="true"><span></span></span></code></pre><p>Now, we need to enable publishing by adding new scripts and attributes to our package.json:</p><pre class="language-undefined line-numbers"><code class="language-undefined">"scripts": {
  "predeploy": "npm run build",
  "deploy": "gh-pages -d build -b master",
  "swap-cname": "rm ./build/CNAME && mv ./build/ProdCNAME ./build/CNAME",
  "preproduction": "npm run build && npm run swap-cname",
  "production": "gh-pages -d build -b master -r https://github.com/OfficerHalf/OfficerHalf.github.io.git"
}<span class="line-numbers-rows" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>There are a few things happening here:</p><ol><li>The predeploy and deploy scripts are just copied from the <a href="https://create-react-app.dev/docs/deployment/#github-pages" rel="follow">create-react-app documentation</a>.</li><li>The swap-cname script removes CNAME and renames ProdCNAME to CNAME for the production deployment.</li><li>The production script pushes the code to a different repo.</li></ol><h3>5. Deploy to dev and prod</h3><p>All that's left is to deploy to each environment:</p><pre class="language-undefined line-numbers"><code class="language-undefined">// for dev
npm run deploy

// for prod
npm run production<span class="line-numbers-rows" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p></p><p>For a full example you can check the <a href="https://github.com/OfficerHalf/dev-site" rel="follow">repo for this site</a>.</p></div></div><div><h1>Why functional components are the future of React (but hooks are dangerous)</h1><h4>June 24, 2019, 8:21 PM</h4><div class="line-numbers"><p>I was skeptical. Why would I ever write a functional component instead of a class component? The promised benefits of functional components are either subjective, no longer true, or never were true. It's now just as easy to shoot yourself in the foot with functional components thanks to hooks like <code>useState</code>. The promised performance benefits of functional components still haven't initialized. And yet, I'm now a believer.</p><p>I have most of a Medium article written titled <em>Hooks are bad for React. </em>Most of the article is dedicated to showing why functional components <em>with hooks </em>are almost the same as class components, so why use functional components? And to a degree, I still believe that, but I never published that article because I saw the ugly truth about React and class components the first time I worked on a React project <em>with other people.</em></p><p class="callout">Not working in isolation makes all the difference.</p><p>The two developers I'm working with started out with little React experience; immediately, they started putting state where it shouldn't have been, deriving state from props without cause, and adding multiple seconds to the build time with <code>node-sass</code>. Horrifying! One of the developers has soaked up advice and pointers like a sponge. For example, once I explained why it was better to derive a value on every render rather than derive state from props, they quickly refactored the offending code. The other developer, however, seems convinced that large, bloated, stateful components are the way, rather than composing a component from multiple subcomponents. Once, the other two developers were on vacation so I quickly refactored the 2nd developer's code to improve reuse, maintainability, and testability. The main way I did this was by converting as many components as I could to functional components.</p><p>This had a few side-effects. At the time, we hadn't used any hooks in the project, and I honestly don't think this particular developer was aware of their existence. So I made the components functional to handicap their ability to write bad code. The best way to manage a project? No. But I'm not technically in charge of these developers, so it's difficult to make executive decisions. The best I can do is offer comments in code reviews.</p><p>But hooks have defeated me. This problematic developer learned about the new hotness and I knew I was in trouble when <code>React.useEffect</code> showed up in a code review. This particular effect was being used to clear the browser history to fix an architecture issue, rather than refactor to avoid the need for the history clear. More (inappropriate) hooks followed. And this is why I still believe that hooks, while maybe not <em>bad </em>for React, are dangerous if the fundamental concepts of React are not well learned.</p></div></div><div><h1>Metal & Synthwave are the Same Thing</h1><h4>September 19, 2018, 4:00 PM</h4><div class="line-numbers"><p>When I read a novel, I often lose track of time. I become so engrossed in the story and characters that I stop perceiving my surroundings until someone else gets my attention. In elementary school I got into trouble reading in class because I didn't realize class had resumed. My entire focus was on reading and comprehending the story.</p><p>This state of mind is called:</p><p><img alt="Flow" src="https://cdn.buttercms.com/WvbC0bmHTt6rTGjBKj63" height="441" style="display:block;margin-left:auto;margin-right:auto" width="662"></p><h2><span>Flow</span></h2><p><span>The term was created by Mihaly Csikszentmihalyi, a Hungarian-American psychologist who dedicated his research to identifying and understanding sources of happiness. He <a href="https://www.ted.com/talks/mihaly_csikszentmihalyi_on_flow" rel="noopener" target="_blank" title="Minhaly's TED Talk on Flow">describes</a> seven characteristics of being in Flow based on countless interviews with people who experience this state:</span></p><ol><li><span>Completely involved in what you are doing - focused, </span>concentrated</li><li><span>A sense of ecstasy - feeling outside of everyday reality</span></li><li><span>Great inner clarity - knowing exactly what to do from one moment to another</span></li><li><span>Confidence - knowing what you need to do is possible to do, even if it is difficult</span></li><li><span>A sense of serenity - you forget yourself</span></li><li><span>Timelessness - sense of time disappears</span></li><li><span>Intrinsic motivation - whatever produces flow becomes its own reward</span></li></ol><p><span>When I am reading in Flow my mind comprehends passages I didn't really read. Rather than registering each word and constructing a meaning or each scanning sentence to gather the point of a paragraph, my mind grabs a sort of summary of the phrases in a paragraph and infers the meaning of the words. It isn't a conscious action; in Flow you feel as if you are operating on autopilot. While I might labor to read a textbook or whitepaper, a good novel sucks me in. I can almost see the events, hear the characters. Rather than an activity, reading becomes an experience.</span><span></span></p><p><span>Flow is most often discussed as a part of the artistic process, but can be present in any activity that is sufficiently engaging and challenging; I also experience Flow when coding. Programming can be uniquely suited for entering a Flow state because it satisfies the first two conditions that contribute to entering Flow:</span></p><ol><li><span>Knowing what to do, how to do it, and how well you are doing with immediate feedback</span></li><li><span>A challenging task that you believe you can complete</span></li><li><span>Freedom from distractions</span><span></span></li></ol><p><span>To people who want to know more about coding, I usually describe it as creative problem solving. There is some goal or functionality you want and the challenge is to combine a set of basic building blocks to meet that goal. If you have practiced coding long enough and are confident in your abilities, the first two requirements are quickly met. Even if I don't immediately know how to solve the entire problem, I can break down the task into a series of smaller and smaller subtasks that I can accomplish. Unless you are developing large scale applications with long build times, feedback is near immediate, especially for web development. The third requirement, freedom from distractions, is mostly dependent on the environment. For me, the best way to remove distraction isn't to go to a quiet place, it's to saturate myself with music and drown out everything around me.</span></p><h2><span>Synths are Vocals, Guitars are Synths</span></h2><p><span><iframe height="314" src="//www.youtube.com/embed/tRVZAAYBWOc" width="560" allowfullscreen></iframe></span></p><p><span>I have two go-to genres for getting into flow: metal and synthwave. Listen to the synthwave track above, There Is No Law Here by Makeup and Vanity Set, from the Brigador soundtrack. The track has four main parts: the 80's drum machine beat, the monotonic bass line, and rising and falling arpeggios, and a single chorus made of repeating chord progression. It's a simple track, but is dense from the get go, an immediate assault of sound. Now, listen to Carcosa by High On Fire, from their 2015 album Luminiferous.</span></p><p><iframe height="314" src="//www.youtube.com/embed/Y2_XFiPyUxA" width="560" allowfullscreen></iframe></p><p><span>Whether or not Carcosa is to your taste (if it is, be sure to check out a live video or two; Matt Pike is the most metal man alive), you can hear its constituent parts as well: Unrelenting drums, a mostly monotonic riff for the verse, another mostly monotonic riff for the chorus, and a simple progression in the bridge underneath a solo. Even the vocals follow a consistent repeating pattern.</span><span></span></p><p><span>While these songs are wildly different styles, they both heavily feature a saturated sound reinforced by repetition, and for me they serve exactly the same purpose when trying to get into Flow. First, consider There Is No Law Here. Like most synthwave, this track is instrumental but has a melody expressed by its arpeggiating synth line, filling the same role as a vocal part. The monotonic bass line could easily be a crunchy, downtuned guitar or overdriven bass. It almost sounds like djent. All of the guitars in Carcosa could be replaced with synths in the same way; the song's feel would change, but the effectiveness of each element wouldn't.</span><span></span></p><p><span>Finally, consider Destroyer by Meteor, which straddles the line between the two genres.</span><span></span></p><div><iframe height="314" src="//www.youtube.com/embed/J5KXOVPHQuM" width="560" allowfullscreen></iframe><span></span></div><p><span>Okay, maybe they aren't the same. Maybe one is a specific subgenre of electronic music that combines nostalgia and modern musical sensibility to create expressive, if repetitive music, and the other is an umbrella term for a vast amount of music with a few commonalities. Still, when I'm trying to get in the zone, these two genres are the ones I look to. Just turn up the volume, feel the synth thump, and obey the riff.</span><span></span></p><div><iframe height="314" src="//www.youtube.com/embed/VufilzHKTqk" width="560" allowfullscreen></iframe></div><div><iframe height="314" src="//www.youtube.com/embed/r_bF9QX2ZmU" width="560" allowfullscreen></iframe></div><p>Bonus synthwave playlist:</p><div><iframe height="380" src="https://open.spotify.com/embed/user/officerhalf/playlist/5XqqyFmwnP5a16m9y9cSO2" width="300" allow="encrypted-media" allowtransparency="true" frameborder="0"></iframe></div></div></div><div><h1>Using thefuck On Windows, With Clink & Cmder</h1><h4>August 14, 2018, 3:16 PM</h4><div class="line-numbers"><p>We all make mistakes, and sometimes we get angry about them. <a href="https://github.com/nvbn/thefuck" rel="noopener" target="_blank" title="The Fuck">thefuck</a> is a handy Python script that turns that anger into something useful by suggesting a correction to a previously failed command.</p><figure class="image"><img alt="thefuck Example" src="https://raw.githubusercontent.com/nvbn/thefuck/master/example.gif"><figcaption>thefuck Example</figcaption></figure><p>So, lets make it work on Windows, which will require <a href="https://mridgers.github.io/clink/" rel="noopener" target="_blank">Clink</a> or <a href="http://cmder.net/" rel="noopener" target="_blank">Cmder</a>. Clink adds some Unix-like features to the Windows command prompt, while Cmder is a package that includes Clink along with a number of other applications to provide a complete terminal solution for Windows. Both are free, and Cmder is always one of the first things I install on a new computer. It's really the best way to use the terminal on Windows. Lets get started. <em>Caveat: this is probably not the best way to make this work, but it's what I came up with while bored at work.</em></p><h2>Prerequisites</h2><ol><li>Install <a href="https://mridgers.github.io/clink/">Clink</a>, or better yet, <a href="http://cmder.net/" rel="noopener" target="_blank">Cmder</a>.</li><li>Install thefuck with pip: <code>pip install thefuck</code></li><li>Enable Clink history: <code>clink set history_io 1</code></li></ol><h2>Create the Alias</h2><p>thefuck works by having platform specific aliases to get the last run command, fix your mistake, and then run the fixed command. Because there's no Windows specific alias (excluding PowerShell, which can be setup following <a href="https://github.com/nvbn/thefuck/wiki/Shell-aliases#powershell" rel="noopener" target="_blank">these directions</a>), we have to make our own. Save this file as <code>thefuckcmder.bat</code> or some other <code>.bat</code> filename. Remember where you save it or ensure it's available in your PATH.</p><p><strong>For Clink</strong></p><pre class="language-batch line-numbers"><code class="language-batch">@echo off
set PYTHONIOENCODING=utf-8
set PYTHONLEGACYWINDOWSSTDIO=yes
tail -n 2 %LOCALAPPDATA%\clink\.history | head -n 1 > %LOCALAPPDATA%\clink\fucked_cmd.txt
set /p fucked_cmd=&lt;%LOCALAPPDATA%\clink\fucked_cmd.txt
thefuck %fucked_cmd% > %LOCALAPPDATA%\clink\unfucked.cmd
call %LOCALAPPDATA%\clink\unfucked.cmd<span class="line-numbers-rows" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>For Cmder</strong></p><pre class="language-batch line-numbers"><code class="language-batch">@echo off
set PYTHONIOENCODING=utf-8
set PYTHONLEGACYWINDOWSSTDIO=yes
tail -n 2 %CMDER_ROOT%\config\.history | head -n 1 > %CMDER_ROOT%\config\fucked_cmd.txt
set /p fucked_cmd=&lt;%CMDER_ROOT%\config\fucked_cmd.txt
thefuck %fucked_cmd% > %CMDER_ROOT%\config\unfucked.cmd
call %CMDER_ROOT%\config\unfucked.cmd<span class="line-numbers-rows" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Now we have to create the alias that calls that script, replacing 'thefuckcmder' with the path to your script.</p><p><strong>For Clink</strong></p><pre class="language-batch line-numbers"><code class="language-batch">doskey fuck=thefuckcmder<span class="line-numbers-rows" aria-hidden="true"><span></span></span></code></pre><p><strong>For Cmder</strong></p><pre class="language-batch line-numbers"><code class="language-batch">alias fuck=thefuckcmder<span class="line-numbers-rows" aria-hidden="true"><span></span></span></code></pre><p>After you restart your shell, running a failing command and <code>fuck</code> should work as expected.</p></div></div></div></div></div><script>!function(e){function t(t){for(var n,i,l=t[0],f=t[1],a=t[2],c=0,s=[];c<l.length;c++)i=l[c],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&s.push(o[i][0]),o[i]=0;for(n in f)Object.prototype.hasOwnProperty.call(f,n)&&(e[n]=f[n]);for(p&&p(t);s.length;)s.shift()();return u.push.apply(u,a||[]),r()}function r(){for(var e,t=0;t<u.length;t++){for(var r=u[t],n=!0,l=1;l<r.length;l++){var f=r[l];0!==o[f]&&(n=!1)}n&&(u.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},o={1:0},u=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var l=this["webpackJsonpdev-site"]=this["webpackJsonpdev-site"]||[],f=l.push.bind(l);l.push=t,l=l.slice();for(var a=0;a<l.length;a++)t(l[a]);var p=f;r()}([])</script><script src="/static/js/2.1385c234.chunk.js"></script><script src="/static/js/main.eccde275.chunk.js"></script></body></html>